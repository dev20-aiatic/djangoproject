{% extends "account/base.html" %}
{% load crispy_forms_filters %}
{% load account socialaccount %}
{% load crispy_forms_tags %}
{% load i18n %}
{% load static %}
{% block head_title %}Editar Perfil{% endblock %}

{% block content %}

    <section class="ftco-section">
        <div class="container">
            <div class="row justify-content-center">
            <div class="col-md-7 col-lg-7">
                <div class="card border-0 shadow rounded-3 my-5">
                    <div class="login-wrap p-4 b-md-5">
                        <h3 class="text-center mb-4">Editar Perfil</h3>

                            <form method="POST" action="{% url 'profile-edit' user.username %}"
                                  enctype='multipart/form-data'>
                                {% csrf_token %}

                                <div class="form-group">
                                    <label for="id_email">{{ form.email.label }}</label>
                                    <input name="email" type="email" class="form-control" id="id_email"
                                           value="{% if form.email.value %}{{ form.email.value }}{% endif %}"
                                           placeholder="Correo electrónico" required maxlength="255">
                                    <small id="fullNameHelp" class="form-text text-muted">¡Ojo! El correo es el único medio actual de restablecimiento de contraseña</small>
                                </div>
                                <div class="form-group">
                                    <label for="id_first_name">{{ form.first_name.label }}</label>
                                    <input name="first_name" type="text"
                                           class="textinput textInput form-control {% if form.first_name.errors %}is-invalid{% endif %}"
                                           value="{% if form.first_name.value %}{{ form.first_name.value }}{% endif %}"
                                           placeholder="Nombres" maxlength="80" required id="id_first_name">
                                    {% for error in form.first_name.errors %}
                                        <strong style="color: red">{{ error|escape }}</strong>
                                    {% endfor %}
                                </div>
                                <div class="form-group">
                                    <label for="id_last_name">{{ form.last_name.label }}</label>
                                    <input name="last_name" type="text"
                                           class="textinput textInput form-control {% if form.last_name.errors %}is-invalid{% endif %}"
                                           value="{% if form.last_name.value %}{{ form.last_name.value }}{% endif %}"
                                           placeholder="Apellidos" maxlength="80" required id="id_last_name">
                                    {% for error in form.last_name.errors %}
                                        <strong style="color: red">{{ error|escape }}</strong>
                                    {% endfor %}
                                </div>
                                <div class="form-group">
                                    <label for="id_username">{{ form.username.label }}</label>
                                    <input name="username" type="text"
                                           class="textinput textInput form-control {% if form.username.errors %}is-invalid{% endif %}"
                                           value="{% if form.username.value %}{{ form.username.value }}{% endif %}"
                                           placeholder="Usuario" maxlength="28" required id="id_username">
                                    {% for error in form.username.errors %}
                                        <strong style="color: red">{{ error|escape }}</strong>
                                    {% endfor %}
                                </div>

                                <div class="form-group">
                                    <label for="id_id_num">{{ form.id_num.label }}</label>
                                    <input name="id_num" type="number"
                                           class="textinput textInput form-control {% if form.id_num.errors %}is-invalid{% endif %}"
                                           value="{% if form.id_num.value %}{{ form.id_num.value }}{% endif %}"
                                           placeholder="Número de identificación" maxlength="12" required
                                           id="id_id_num">
                                    {% for error in form.id_num.errors %}
                                        <strong style="color: red">{{ error|escape }}</strong>
                                    {% endfor %}
                                </div>
                                <br>
                                <div class="profile_picture_wrapper">
                                    <div class="pic-holder">
                                        <img id="profilePic" class="pic " src="{{ user.profile_picture.url }}"
                                             alt="profile_picture">

                                        <label for="id_profile_picture" class="upload-file-block">
                                            <div class="text-center">
                                                <div class="mb-2">
                                                    <i class="fa fa-camera fa-2x"></i>
                                                </div>
                                                Subir <br/> foto de perfil
                                            </div>
                                        </label>
                                        <Input type="file" name="profile_picture"
                                               id="id_profile_picture" accept="image/*">
                                    </div>
                                </div>
                                <a class="btn btn-secondary " href="{% url 'profile' user.username %}">Cancelar</a>
                                <button class="btn btn-primary" type="submit"> Guardar cambios</button>
                            </form>
                            <br>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

{% endblock %}